name: Keep Supabase Alive

# æ¯6å¤©è¿è¡Œä¸€æ¬¡ + å…è®¸æ‰‹åŠ¨è¿è¡Œ
on:
  schedule:
    - cron: '0 12 */5 * *'  # æ¯5å¤©ä¸­åˆ12ç‚¹UTC
  workflow_dispatch:        # æ‰‹åŠ¨è¿è¡ŒæŒ‰é’®

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
    - name: Ping Supabase
      run: |
        echo "ğŸ”„ å¼€å§‹ä¿æ´»Supabase..."
        response=$(curl -s -w "%{http_code}" \
          -H "apikey: ${{ secrets.SUPABASE_ANON_KEY }}" \
          -H "Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}" \
          -o /dev/null \
          "https://dgofbyradcsukobsgshu.supabase.co/rest/v1/")
        
        if [ "$response" -eq 200 ] || [ "$response" -eq 404 ]; then
          echo "âœ… ä¿æ´»æˆåŠŸ! HTTPçŠ¶æ€ç : $response"
        else
          echo "âš ï¸ ä¿æ´»å“åº”: HTTPçŠ¶æ€ç : $response"
        fi
        
        echo "ğŸ“… ä¿æ´»æ—¶é—´: $(date)"
        echo "ğŸ‰ ä¿æ´»ä»»åŠ¡å®Œæˆ!"
